<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.ImageView?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.projectcab302.Controller.ProfileController"
            stylesheets="@style.css"
            prefWidth="900" prefHeight="600"
            styleClass="app-root">

    <!-- TOP BAR -->
    <top>
        <HBox spacing="12" styleClass="top-bar" BorderPane.alignment="CENTER_LEFT">
            <Button text="Back"   onAction="#back"   styleClass="top-button"/>
            <Label  text="Profile"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="Logout" onAction="#logout" styleClass="top-button"/>
        </HBox>
    </top>

    <!-- CONTENT -->
    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
            <content>
                <VBox spacing="24" styleClass="hero-section">
                    <padding><Insets top="20" right="24" bottom="40" left="24"/></padding>

                    <Label text="Your Profile" styleClass="page-header"/>

                    <!-- “Card” using tileButton styling from style.css -->
                    <HBox spacing="24" styleClass="tileButton">
                        <!-- Left: avatar + upload -->
                        <VBox spacing="12" alignment="TOP_CENTER" prefWidth="220">
                            <StackPane>
                                <ImageView fx:id="avatarImage"
                                           fitWidth="140" fitHeight="140" preserveRatio="true"/>
                            </StackPane>
                            <Button text="Upload Avatar"
                                    onAction="#uploadAvatar"
                                    styleClass="top-button"/>
                        </VBox>

                        <!-- Right: fields -->
                        <GridPane hgap="18" vgap="14">
                            <columnConstraints>
                                <ColumnConstraints minWidth="120"/>
                                <ColumnConstraints minWidth="260" hgrow="ALWAYS"/>
                            </columnConstraints>

                            <!-- Name -->
                            <Label text="Name:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                            <Label fx:id="nameLabel"
                                   GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                            <TextField fx:id="nameField"
                                       promptText="Full name"
                                       visible="false" managed="false"
                                       styleClass="input-field"
                                       GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                            <!-- Email -->
                            <Label text="Email:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                            <Label fx:id="emailLabel"
                                   GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                            <TextField fx:id="emailField"
                                       promptText="name@example.com"
                                       visible="false" managed="false"
                                       styleClass="input-field"
                                       GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                            <!-- Role -->
                            <Label text="Role:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                            <Label fx:id="roleLabel"
                                   GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                            <!-- Actions -->
                            <HBox spacing="10" GridPane.rowIndex="4" GridPane.columnIndex="1">
                                <Button fx:id="editSaveBtn"
                                        text="Edit"
                                        onAction="#editSave"
                                        styleClass="top-button"/>
                                <Button text="Change Password"
                                        onAction="#changePassword"
                                        styleClass="top-button"/>
                            </HBox>
                        </GridPane>
                    </HBox>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <!-- FOOTER -->
    <bottom>
        <HBox alignment="CENTER" styleClass="footer">
            <Label text="© Your App"/>
        </HBox>
    </bottom>

</BorderPane>
